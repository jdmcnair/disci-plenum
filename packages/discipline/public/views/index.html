<div>
  <table class="table table-bordered table-striped table-hover">
    <thead>
      <th>Family Member</th>
      <th>Remaining Chores</th>
      <th>Current Chore Session</th>
      <th>Actions</th>
    </thead>
    <tbody>
      <tr ng-repeat="member in members">
        <td>{{member.name}}</td>
        <td>
          <div ng-if="choreSum(member)" class="btn-group" dropdown >
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
              {{ choreSum(member) | duration }} <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
              <li><a href ng-click="subtractTimeAmount(member,1)">Reduce by 1</a></li>
              <li><a href ng-click="subtractTimeAmount(member,5)">Reduce by 5</a></li>
              <li class="divider"></li>
              <li>
                <a ui-sref="create choreTime({ memberId: member._id })">
                  <i class="glyphicon glyphicon-plus"></i>
                  Add
                </a>
              </li>
            </ul>
          </div>        
        </td>
        <td>
          <span ng-if='member.currentSession'>Begun {{ member.currentSession.start | timeFromNow }}</span>
        </td>
        <td>
          <div ng-if="hasAuthorization(member)" class="btn-group">
            <a ng-if="choreSum(member)" class="btn btn-default" data-ng-click="toggleActivity(member)">
              <i class="glyphicon" ng-class="member.currentSession ? 'glyphicon-stop' : 'glyphicon-play'"></i>
            </a>
            <a ng-if="parentOrAdmin()" class="btn btn-default" ui-sref="create choreTime({ memberId: member._id })">
              <i class="glyphicon glyphicon-plus"></i>
              Add
            </a>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <table class="table table-bordered table-striped table-hover">
    <thead>
      <th>Family Member</th>
      <th>Reason</th>
      <th>Duration</th>
      <th>Date Added</th>
      <th>Added By</th>
      <th>Actions</th>
    </thead>
    <tbody>
      <tr ng-repeat="choreTime in choreTimes">
        <td>{{ choreTime.learner.name }}</td>
        <td><a data-ng-href="#!/choreTimes/{{choreTime._id}}">{{choreTime.reason}}</a></td>
        <td>{{ choreTime.remainingDuration | duration }}</td>
        <td>{{choreTime.created | timeFromNow}}</td>
        <td>{{choreTime.teacher.name}}</td>
        <td>
          <span data-ng-if="hasChoreAuthorization(choreTime)">
            <a class="btn" href="/#!/choreTimes/{{choreTime._id}}/edit">
              <i class="glyphicon glyphicon-edit"></i>
            </a>
            <a class="btn" data-ng-click="remove(choreTime);">
              <i class="glyphicon glyphicon-trash"></i>
            </a>
          </span>
        </td>
      </tr>
    </tbody>
  </table> 
</div>

